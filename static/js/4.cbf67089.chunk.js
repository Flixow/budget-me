(this["webpackJsonpudemy-course-budget"]=this["webpackJsonpudemy-course-budget"]||[]).push([[4],{74:function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"fetchAllCategories",(function(){return o}));var a={};n.r(a),n.d(a,"fetchBudget",(function(){return i})),n.d(a,"fetchBudgetedCategories",(function(){return s})),n.d(a,"addBudgetTransaction",(function(){return d}));var c=n(1),u=n.n(c);function o(){var t,e;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.awrap(fetch("".concat("http://localhost:3001","/categories/?_expand=parentCategory")));case 2:return t=n.sent,n.next=5,u.a.awrap(t.json());case 5:return e=n.sent,n.abrupt("return",e);case 7:case"end":return n.stop()}}))}function i(t){var e;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.id,n.next=3,u.a.awrap(fetch("".concat("http://localhost:3001","/budgets/").concat(e,"/?_embed=transactions")));case 3:return n.abrupt("return",n.sent.json());case 4:case"end":return n.stop()}}))}function s(t){var e;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.budgetId,n.next=3,u.a.awrap(fetch("".concat("http://localhost:3001","/budgets/").concat(e,"/budgetCategories")));case 3:return n.abrupt("return",n.sent.json());case 4:case"end":return n.stop()}}))}function d(t){var e,n,r;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=t.budgetId,n=t.data,a.next=3,u.a.awrap(fetch("".concat("http://localhost:3001","/budgets/").concat(e,"/transactions"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)}));case 3:return r=a.sent,a.next=6,u.a.awrap(r.json());case 6:return a.abrupt("return",a.sent);case 7:case"end":return a.stop()}}))}e.a={common:r,budget:a}},75:function(t,e,n){"use strict";var r=n(23),a=n(74);var c=function(){return Object(r.d)(["allCategories"],a.a.common.fetchAllCategories)};var u=function(t){return Object(r.d)(["budget",{id:t}],a.a.budget.fetchBudget)};var o=function(t){return Object(r.d)(["budgetedCategories",{budgetId:t}],a.a.budget.fetchBudgetedCategories)};n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return o}))},77:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a}));var r=function(t){var e=new Date(t);return new Intl.DateTimeFormat("pl").format(e)},a=function(t){var e=Number(t);return new Intl.NumberFormat("pl",{style:"currency",currency:"PLN"}).format(e)}},80:function(t,e,n){"use strict";n.r(e);var r=n(17),a=n(2),c=n(0),u=n.n(c),o=n(76),i=n(13),s=n(5),d=n(37),f=n(75),l=n(77),b=n(3);function m(){var t=Object(b.a)(["\n  background-color: ",";\n"]);return m=function(){return t},t}function g(){var t=Object(b.a)(["\n  font-weight: 700;\n  color: ","\n"]);return g=function(){return t},t}function p(){var t=Object(b.a)(["\n  background-color: ",";\n"]);return p=function(){return t},t}function v(){var t=Object(b.a)(["\n  border: 1px solid ",";\n  padding: ","px;\n  display: flex;\n  justify-content: space-between;\n"]);return v=function(){return t},t}var h=a.default.div(v(),(function(t){return t.theme.colors.gray.dark}),(function(t){return t.theme.spacing.xs})),y=Object(a.default)(h)(p(),(function(t){return t.theme.colors.gray.normal})),j=a.default.span(g(),(function(t){var e=t.theme;return t.negative?e.colors.red.normal:e.colors.green.normal})),O=Object(a.default)(h)(m(),(function(t){return t.theme.colors.gray.light})),C=function(t){var e=t.onClick,n=void 0===e?o.noop:e,r=t.name,a=t.amount,i=t.categories,s=t.transactions,d=Object(c.useMemo)((function(){var t=function(){try{return i.reduce((function(t,e){return t+e.budget}),0)}catch(t){return null}}(),e=s.filter((function(t){return i.find((function(e){return e.categoryId===t.categoryId}))})).reduce((function(t,e){return t+e.amount}),0);return t?t-e:null}),[i,s]),f=Object(c.useMemo)((function(){return a||d}),[a,d]);return u.a.createElement(y,{onClick:n},u.a.createElement("span",null,r),u.a.createElement(j,{negative:f<0},Object(l.a)(f)))};C.defaultProps={transactions:[],categories:[]};var w=C,x=function(t){var e=t.item,n=t.transactions,r=t.categories,a=n.filter((function(t){return t.categoryId===e.id})).reduce((function(t,e){return t+e.amount}),0),o=e.budget?e.budget-a:null,i=Object(c.useMemo)((function(){return r.find((function(t){return t.id===e.categoryId})).name}),[r,e]);return u.a.createElement(O,null,u.a.createElement("span",null,i),u.a.createElement("span",null,u.a.createElement(j,{negative:o<0},Object(l.a)(o))))};x.defaultProps={transactions:[],categories:[]};var k=x,E=a.default.div.withConfig({displayName:"BudgetCategoryList___StyledDiv",componentId:"sc-89atw5-0"})(["border-bottom:",";"],(function(t){var e=t.theme;return"5px solid ".concat(e.colors.gray.light)})),I=a.default.div.withConfig({displayName:"BudgetCategoryList___StyledDiv2",componentId:"sc-89atw5-1"})(["border-top:",";"],(function(t){var e=t.theme;return"5px solid ".concat(e.colors.gray.light)})),M=function(){var t=Object(f.b)(1).data,e=Object(f.c)(1).data,n=Object(f.a)().data,a=Object(c.useContext)(d.a.store).dispatch,l=Object(c.useCallback)((function(t){return a({type:"selectParentCategory",payload:t})}),[a]),b=Object(i.b)().t,m=Object(c.useRef)(null),g=Object(c.useMemo)((function(){return t.transactions.reduce((function(t,e){return t+e.amount}),0)}),[t]),p=Object(c.useMemo)((function(){return function(t,e){return t.reduce((function(t,n){var r=e.filter((function(t){return t.categoryId===n.id})).reduce((function(t,e){return t+e.amount}),0);return t+Math.max(n.budget,r)}),0)}(e,t.transactions)}),[e,t]),v=Object(c.useMemo)((function(){return function(t,e){return t.filter((function(t){return!e.find((function(e){return e.id===t.categoryId}))}))}(t.transactions,e)}),[t,e]),h=Object(c.useMemo)((function(){return function(t){return t.reduce((function(t,e){return t+e.amount}),0)}(v)}),[v]),y=Object(c.useMemo)((function(){return Object(o.groupBy)(e,(function(t){return n.find((function(e){return e.id===t.categoryId})).parentCategory.name}))}),[e,n]),j=Object(c.useCallback)((function(){l(),m.current()}),[l,m]),O=Object(c.useCallback)((function(){l(null),m.current()}),[l,m]),C=Object(c.useCallback)((function(){return Object.entries(y).map((function(e){var a=Object(r.a)(e,2),o=a[0],i=a[1];return{id:o,Trigger:function(e){var n=e.onClick;return u.a.createElement(w,{onClick:Object(c.useCallback)((function(){n(),l(o)}),[n]),name:o,categories:i,transactions:t.transactions})},children:i.map((function(e){return u.a.createElement(k,{key:e.id,categories:n,transactions:t.transactions,item:e})}))}}))}),[y,n,t,l]),x=t.totalAmount-g,M=t.totalAmount-p-h;return u.a.createElement("div",null,u.a.createElement(E,null,u.a.createElement(w,{name:t.name,amount:x,onClick:j})),u.a.createElement(s.f,{items:C(),clickRef:m}),u.a.createElement(I,null,u.a.createElement(w,{name:b("Other categories"),amount:M,onClick:O})))};n.d(e,"default",(function(){return M}))}}]);
//# sourceMappingURL=4.cbf67089.chunk.js.map